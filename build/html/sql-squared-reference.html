

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Reference - SQL² &mdash; SlamData 2.5 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="SlamData 2.5 documentation" href="index.html"/>
        <link rel="next" title="Reference - SlamDown" href="slamdown-reference.html"/>
        <link rel="prev" title="Troubleshooting FAQ" href="troubleshooting-faq.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> SlamData
          

          
          </a>

          
            
            
              <div class="version">
                2.5
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="users-guide.html">Users Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial.html">SlamData Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="securing-slamdata.html">Securing SlamData Community Edition</a></li>
<li class="toctree-l1"><a class="reference internal" href="troubleshooting-faq.html">Troubleshooting FAQ</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Reference - SQL²</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="#data-types">Data Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="#clauses-operators-and-functions">Clauses, Operators, and Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="#syntax-changes-in-version-2-5">Syntax Changes in Version 2.5</a></li>
<li class="toctree-l2"><a class="reference internal" href="#basic-selection">Basic Selection</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#select-all-values-from-a-path">Select all values from a path</a></li>
<li class="toctree-l3"><a class="reference internal" href="#select-specific-fields-from-a-path">Select specific fields from a path</a></li>
<li class="toctree-l3"><a class="reference internal" href="#give-a-path-an-alias-to-refer-to-in-the-query">Give a path an alias to refer to in the query</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#filtering-a-result-set">Filtering a Result Set</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#filtering-using-a-numeric-value">Filtering using a numeric value:</a></li>
<li class="toctree-l3"><a class="reference internal" href="#filtering-using-a-string-value">Filtering using a string value:</a></li>
<li class="toctree-l3"><a class="reference internal" href="#filtering-using-multiple-boolean-predicates">Filtering using multiple Boolean predicates:</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#numeric-and-string-operations">Numeric and String Operations</a></li>
<li class="toctree-l2"><a class="reference internal" href="#dates-and-times">Dates and Times</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#filter-based-on-a-timestamp-date-and-time">Filter based on a timestamp (date and time)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#filter-based-on-a-time">Filter based on a time</a></li>
<li class="toctree-l3"><a class="reference internal" href="#filter-based-on-a-date">Filter based on a date</a></li>
<li class="toctree-l3"><a class="reference internal" href="#filter-based-on-part-of-a-date">Filter based on part of a date</a></li>
<li class="toctree-l3"><a class="reference internal" href="#filter-based-on-a-unix-epoch">Filter based on a Unix epoch</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#grouping">Grouping</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#group-based-on-a-single-field">Group based on a single field</a></li>
<li class="toctree-l3"><a class="reference internal" href="#group-based-on-multiple-fields">Group based on multiple fields</a></li>
<li class="toctree-l3"><a class="reference internal" href="#group-based-on-date-part">Group based on date part</a></li>
<li class="toctree-l3"><a class="reference internal" href="#filter-within-a-group">Filter within a group</a></li>
<li class="toctree-l3"><a class="reference internal" href="#double-grouping">Double grouping</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#nested-data-and-arrays">Nested Data and Arrays</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#nesting">Nesting</a></li>
<li class="toctree-l3"><a class="reference internal" href="#arrays">Arrays</a></li>
<li class="toctree-l3"><a class="reference internal" href="#flattening">Flattening</a></li>
<li class="toctree-l3"><a class="reference internal" href="#filtering-using-arrays">Filtering using arrays</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#pagination-and-sorting">Pagination and Sorting</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#pagination">Pagination</a></li>
<li class="toctree-l3"><a class="reference internal" href="#sorting">Sorting</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#joining-collections">Joining Collections</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#join-considerations">Join Considerations</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#conditionals-and-nulls">Conditionals and Nulls</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#conditionals">Conditionals</a></li>
<li class="toctree-l3"><a class="reference internal" href="#nulls">Nulls</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#database-specific-notes">Database Specific Notes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#mongodb">MongoDB</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#the-id-field">The _id Field</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="slamdown-reference.html">Reference - SlamDown</a></li>
<li class="toctree-l1"><a class="reference internal" href="api-reference.html">Reference - SlamData API</a></li>
<li class="toctree-l1"><a class="reference internal" href="administration-guide.html">Administration Guide - Community Edition</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">SlamData</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Reference - SQL²</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/sql-squared-reference.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="figure" id="id1">
<img alt="SlamData Logo" src="_images/white-logo.png" />
<p class="caption"><span class="caption-text">SlamData Logo</span></p>
</div>
<div class="section" id="reference-sql2">
<h1>Reference - SQL²<a class="headerlink" href="#reference-sql2" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>SQL2 is a subset of ANSI SQL, designed for queries into NoSQL databases.</p>
<p>SQL2 has support for every major SQL SELECT clause, such as <code class="docutils literal"><span class="pre">AS</span></code>,
<code class="docutils literal"><span class="pre">WHERE</span></code>, <code class="docutils literal"><span class="pre">JOIN</span></code>, <code class="docutils literal"><span class="pre">GROUP</span> <span class="pre">BY</span></code>, <code class="docutils literal"><span class="pre">HAVING</span></code>, <code class="docutils literal"><span class="pre">LIMIT</span></code>, <code class="docutils literal"><span class="pre">OFFSET</span></code>,
<code class="docutils literal"><span class="pre">CROSS</span></code>, etc. It also contains many standard SQL functions and
operators. It follows PostgreSQL where SQL dialects diverge.</p>
</div>
<hr class="docutils" />
<div class="section" id="data-types">
<h2>Data Types<a class="headerlink" href="#data-types" title="Permalink to this headline">¶</a></h2>
<p>The following data types are used by SQL2.</p>
<p><strong>Note:</strong> &gt; Some data types are not natively supported by all databases.
Instead, they are emulated by SlamData, meaning that you can use them as
if they were supported by the database.</p>
<p><strong>MDB</strong> = Native MongoDB Support</p>
<p><strong>XYZ</strong> = Native XYZ DB Support (example for future databases)</p>
<table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="44%" />
<col width="30%" />
<col width="6%" />
<col width="6%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Type</th>
<th class="head">Description</th>
<th class="head">Examples</th>
<th class="head">MDB</th>
<th class="head">XYZ</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Null</td>
<td>Indicates missing information.</td>
<td><code class="docutils literal"><span class="pre">null</span></code></td>
<td>Yes</td>
<td>???</td>
</tr>
<tr class="row-odd"><td>Boolean</td>
<td>true or false</td>
<td><code class="docutils literal"><span class="pre">true</span></code>, <code class="docutils literal"><span class="pre">false</span></code></td>
<td>Yes</td>
<td>???</td>
</tr>
<tr class="row-even"><td>Integer</td>
<td>Whole numbers (no fractional
component)</td>
<td><code class="docutils literal"><span class="pre">1</span></code>, <code class="docutils literal"><span class="pre">-2</span></code></td>
<td>Yes</td>
<td>???</td>
</tr>
<tr class="row-odd"><td>Decimal</td>
<td>Decimal numbers (optional
fractional components)</td>
<td><code class="docutils literal"><span class="pre">1.0</span></code>, <code class="docutils literal"><span class="pre">-2.19743</span></code></td>
<td>Yes</td>
<td>???</td>
</tr>
<tr class="row-even"><td>String</td>
<td>Text</td>
<td><code class="docutils literal"><span class="pre">&quot;221B</span> <span class="pre">Baker</span> <span class="pre">Street&quot;</span></code></td>
<td>Yes</td>
<td>???</td>
</tr>
<tr class="row-odd"><td>DateTime</td>
<td>Date and time, in ISO8601 format</td>
<td><code class="docutils literal"><span class="pre">TIMESTAMP(&quot;2004-10-1</span>
<span class="pre">9T10:23:54Z&quot;)</span></code></td>
<td>Yes</td>
<td>???</td>
</tr>
<tr class="row-even"><td>Time</td>
<td>Time in the format HH:MM:SS.</td>
<td><code class="docutils literal"><span class="pre">TIME(&quot;10:23:54&quot;)</span></code></td>
<td>No</td>
<td>???</td>
</tr>
<tr class="row-odd"><td>Date</td>
<td>Date in the format YYYY-MM-DD</td>
<td><code class="docutils literal"><span class="pre">DATE(&quot;2004-10-19&quot;)</span></code></td>
<td>No</td>
<td>???</td>
</tr>
<tr class="row-even"><td>Interval</td>
<td>Time interval, in ISO8601 format</td>
<td><code class="docutils literal"><span class="pre">INTERVAL(&quot;P3DT4H5M6S</span>
<span class="pre">&quot;)</span></code></td>
<td>No</td>
<td>???</td>
</tr>
<tr class="row-odd"><td>Object
ID</td>
<td>Unique object identifier.</td>
<td><code class="docutils literal"><span class="pre">OID(&quot;507f1f77bcf86cd</span>
<span class="pre">799439011&quot;)</span></code></td>
<td>Yes</td>
<td>???</td>
</tr>
<tr class="row-even"><td>Ordered
Set</td>
<td>Ordered list with no duplicates
allowed</td>
<td><code class="docutils literal"><span class="pre">(1,</span> <span class="pre">2,</span> <span class="pre">3)</span></code></td>
<td>No</td>
<td>???</td>
</tr>
<tr class="row-odd"><td>Array</td>
<td>Ordered list with duplicates
allowed</td>
<td><code class="docutils literal"><span class="pre">[1,</span> <span class="pre">2,</span> <span class="pre">2]</span></code></td>
<td>Yes</td>
<td>???</td>
</tr>
</tbody>
</table>
</div>
<hr class="docutils" />
<div class="section" id="clauses-operators-and-functions">
<h2>Clauses, Operators, and Functions<a class="headerlink" href="#clauses-operators-and-functions" title="Permalink to this headline">¶</a></h2>
<p>The following clauses are supported:</p>
<table border="1" class="docutils">
<colgroup>
<col width="15%" />
<col width="85%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Type</th>
<th class="head">Clauses</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Basic</td>
<td><code class="docutils literal"><span class="pre">SELECT</span></code>, <code class="docutils literal"><span class="pre">AS</span></code>, <code class="docutils literal"><span class="pre">FROM</span></code></td>
</tr>
<tr class="row-odd"><td>Joins</td>
<td><code class="docutils literal"><span class="pre">LEFT</span> <span class="pre">OUTER</span> <span class="pre">JOIN</span></code>, <code class="docutils literal"><span class="pre">RIGHT</span> <span class="pre">OUTER</span> <span class="pre">JOIN</span></code>, <code class="docutils literal"><span class="pre">INNER</span> <span class="pre">JOIN</span></code>, <code class="docutils literal"><span class="pre">FULL</span> <span class="pre">JOIN</span></code>, <code class="docutils literal"><span class="pre">CROSS</span></code></td>
</tr>
<tr class="row-even"><td>Filtering</td>
<td><code class="docutils literal"><span class="pre">WHERE</span></code></td>
</tr>
<tr class="row-odd"><td>Grouping</td>
<td><code class="docutils literal"><span class="pre">GROUP</span> <span class="pre">BY</span></code>, <code class="docutils literal"><span class="pre">HAVING</span></code></td>
</tr>
<tr class="row-even"><td>Conditional</td>
<td><code class="docutils literal"><span class="pre">CASE</span></code> , <code class="docutils literal"><span class="pre">WHEN</span></code>, <code class="docutils literal"><span class="pre">DEFAULT</span></code></td>
</tr>
<tr class="row-odd"><td>Paging</td>
<td><code class="docutils literal"><span class="pre">LIMIT</span></code>, <code class="docutils literal"><span class="pre">OFFSET</span></code></td>
</tr>
<tr class="row-even"><td>Sorting</td>
<td><code class="docutils literal"><span class="pre">ORDER</span> <span class="pre">BY</span></code> , <code class="docutils literal"><span class="pre">DESC</span></code>, <code class="docutils literal"><span class="pre">ASC</span></code></td>
</tr>
</tbody>
</table>
<p>The following operators are supported:</p>
<table border="1" class="docutils">
<colgroup>
<col width="18%" />
<col width="83%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Type</th>
<th class="head">Operators</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Numeric</td>
<td><code class="docutils literal"><span class="pre">+</span></code>, <code class="docutils literal"><span class="pre">-</span></code>, <code class="docutils literal"><span class="pre">*</span></code>, <code class="docutils literal"><span class="pre">/</span></code>, <code class="docutils literal"><span class="pre">%</span></code></td>
</tr>
<tr class="row-odd"><td>String</td>
<td><code class="docutils literal"><span class="pre">~</span></code> , <code class="docutils literal"><span class="pre">~*</span></code>, <code class="docutils literal"><span class="pre">!~</span></code>, <code class="docutils literal"><span class="pre">!~*</span></code>, <code class="docutils literal"><span class="pre">LIKE</span></code>, <code class="docutils literal"><span class="pre">||</span></code></td>
</tr>
<tr class="row-even"><td>Array</td>
<td><code class="docutils literal"><span class="pre">||</span></code>, <code class="docutils literal"><span class="pre">[</span> <span class="pre">...</span> <span class="pre">]</span></code></td>
</tr>
<tr class="row-odd"><td>Relational</td>
<td><code class="docutils literal"><span class="pre">=</span></code>, <code class="docutils literal"><span class="pre">&gt;=</span></code>, <code class="docutils literal"><span class="pre">&lt;=</span></code>, <code class="docutils literal"><span class="pre">&lt;&gt;</span></code>, <code class="docutils literal"><span class="pre">BETWEEN</span></code>, <code class="docutils literal"><span class="pre">IN</span></code>, <code class="docutils literal"><span class="pre">NOT</span> <span class="pre">IN</span></code></td>
</tr>
<tr class="row-even"><td>Boolean</td>
<td><code class="docutils literal"><span class="pre">AND</span></code>, <code class="docutils literal"><span class="pre">OR</span></code>, <code class="docutils literal"><span class="pre">NOT</span></code></td>
</tr>
<tr class="row-odd"><td>Projection</td>
<td><code class="docutils literal"><span class="pre">foo.bar</span></code>, <code class="docutils literal"><span class="pre">foo[2]</span></code>, <code class="docutils literal"><span class="pre">foo{*}</span></code>, <code class="docutils literal"><span class="pre">foo[*]</span></code></td>
</tr>
<tr class="row-even"><td>Date/Time</td>
<td><code class="docutils literal"><span class="pre">TIMESTAMP</span></code>, <code class="docutils literal"><span class="pre">DATE</span></code>, <code class="docutils literal"><span class="pre">INTERVAL</span></code>, <code class="docutils literal"><span class="pre">TIME</span></code></td>
</tr>
<tr class="row-odd"><td>Identity</td>
<td><code class="docutils literal"><span class="pre">OID</span></code></td>
</tr>
</tbody>
</table>
<p><strong>Note:</strong> <code class="docutils literal"><span class="pre">~</span></code> , <code class="docutils literal"><span class="pre">~*</span></code>, <code class="docutils literal"><span class="pre">!~</span></code>, and <code class="docutils literal"><span class="pre">!~*</span></code> are regular expression
operators. <code class="docutils literal"><span class="pre">~*</span></code>, <code class="docutils literal"><span class="pre">!~</span></code>, and <code class="docutils literal"><span class="pre">!~*</span></code> are preliminary and may not
work in the current release.</p>
<p><strong>Also Note:</strong>  The <code class="docutils literal"><span class="pre">||</span></code> operator for strings will concatenate two
strings; for example, you can create a full name from a first and last
name property: <code class="docutils literal"><span class="pre">c.firstName</span> <span class="pre">||</span> <span class="pre">'</span> <span class="pre">'</span> <span class="pre">||</span> <span class="pre">c.lastName</span></code>. The <code class="docutils literal"><span class="pre">||</span></code>
operator for arrays will concatenate two arrays; for example, if <code class="docutils literal"><span class="pre">xy</span></code>
is an array with two values, then <code class="docutils literal"><span class="pre">c.xy</span> <span class="pre">||</span> <span class="pre">[0]</span></code> will create an array
with three values, where the third value is zero.</p>
<p>The following functions are supported:</p>
<table border="1" class="docutils">
<colgroup>
<col width="17%" />
<col width="83%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Type</th>
<th class="head">Functions</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>String</td>
<td><code class="docutils literal"><span class="pre">CONCAT</span></code>, <code class="docutils literal"><span class="pre">LOWER</span></code>, <code class="docutils literal"><span class="pre">UPPER</span></code>, <code class="docutils literal"><span class="pre">SUBSTRING</span></code>, <code class="docutils literal"><span class="pre">LENGTH</span></code>, <code class="docutils literal"><span class="pre">SEARCH</span></code></td>
</tr>
<tr class="row-odd"><td>DateTime</td>
<td><code class="docutils literal"><span class="pre">DATE_PART</span></code>, <code class="docutils literal"><span class="pre">TO_TIMESTAMP</span></code></td>
</tr>
<tr class="row-even"><td>Nulls</td>
<td><code class="docutils literal"><span class="pre">COALESCE</span></code></td>
</tr>
<tr class="row-odd"><td>Arrays</td>
<td><code class="docutils literal"><span class="pre">ARRAY_LENGTH</span></code>, <code class="docutils literal"><span class="pre">FLATTEN_ARRAY</span></code></td>
</tr>
<tr class="row-even"><td>Objects</td>
<td><code class="docutils literal"><span class="pre">FLATTEN_OBJECT</span></code></td>
</tr>
<tr class="row-odd"><td>Set-Level</td>
<td><code class="docutils literal"><span class="pre">DISTINCT</span></code>, <code class="docutils literal"><span class="pre">DISTINCT_BY</span></code></td>
</tr>
<tr class="row-even"><td>Aggregation</td>
<td><code class="docutils literal"><span class="pre">COUNT</span></code>, <code class="docutils literal"><span class="pre">SUM</span></code>, <code class="docutils literal"><span class="pre">MIN</span></code>, <code class="docutils literal"><span class="pre">MAX</span></code>, <code class="docutils literal"><span class="pre">AVG</span></code></td>
</tr>
<tr class="row-odd"><td>Identity</td>
<td><code class="docutils literal"><span class="pre">SQUASH</span></code></td>
</tr>
</tbody>
</table>
</div>
<hr class="docutils" />
<div class="section" id="syntax-changes-in-version-2-5">
<h2>Syntax Changes in Version 2.5<a class="headerlink" href="#syntax-changes-in-version-2-5" title="Permalink to this headline">¶</a></h2>
<p>When SlamData 2.5 was released in early 2016 the SQL2 syntax changed
slightly. Please make note of the following syntax to avoid problems in
queries:</p>
<p>Query paths must be surrounded by backward-ticks ` on both ends of the
path.</p>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre>SELECT * FROM `/users`
</pre></div>
</div>
<p>When specifying a string in any context surround it by quotes <code class="docutils literal"><span class="pre">&quot;</span></code> on
both ends.</p>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre>SELECT * FROM `/users` WHERE first_name = &quot;Joe&quot;
</pre></div>
</div>
<p>When specifying a single character, and not a full string, in any
context, surround it by single ticks <code class="docutils literal"><span class="pre">'</span></code> on both ends.</p>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre>SELECT * FROM `/users` WHERE middle_initial = &#39;A&#39;
</pre></div>
</div>
<p>When using functions such as <code class="docutils literal"><span class="pre">DATE</span></code>, <code class="docutils literal"><span class="pre">DATETIME</span></code>, <code class="docutils literal"><span class="pre">TIMESTAMP</span></code>, etc
that require a value it must be surrounded by <code class="docutils literal"><span class="pre">(</span></code> and <code class="docutils literal"><span class="pre">)</span></code>. Single
character <code class="docutils literal"><span class="pre">'</span></code> and string <code class="docutils literal"><span class="pre">&quot;</span></code> quotes still apply.</p>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre>SELECT * FROM `/users`
WHERE
    last_login &gt; DATE(&quot;2016-01-01&quot;) AND
    subscribed = &#39;Y&#39;
</pre></div>
</div>
</div>
<div class="section" id="basic-selection">
<h2>Basic Selection<a class="headerlink" href="#basic-selection" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal"><span class="pre">SELECT</span></code> statement returns a result set of records from one or
more tables.</p>
<div class="section" id="select-all-values-from-a-path">
<h3>Select all values from a path<a class="headerlink" href="#select-all-values-from-a-path" title="Permalink to this headline">¶</a></h3>
<p>To select all values from a path, use the asterisk (<code class="docutils literal"><span class="pre">*</span></code>).</p>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre>SELECT * FROM `/users`
</pre></div>
</div>
</div>
<div class="section" id="select-specific-fields-from-a-path">
<h3>Select specific fields from a path<a class="headerlink" href="#select-specific-fields-from-a-path" title="Permalink to this headline">¶</a></h3>
<p>To select specific fields from a path, use the field names, separated by
commas.</p>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre>SELECT name, age FROM `/users`
</pre></div>
</div>
</div>
<div class="section" id="give-a-path-an-alias-to-refer-to-in-the-query">
<h3>Give a path an alias to refer to in the query<a class="headerlink" href="#give-a-path-an-alias-to-refer-to-in-the-query" title="Permalink to this headline">¶</a></h3>
<p>Follow the path name with an <code class="docutils literal"><span class="pre">AS</span></code> and an alias name, and then you can
use the alias name when specifying the fields. This is especially useful
when you have data from more than one source.</p>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre>SELECT c.name, c.age FROM `/users` AS c
</pre></div>
</div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="filtering-a-result-set">
<h2>Filtering a Result Set<a class="headerlink" href="#filtering-a-result-set" title="Permalink to this headline">¶</a></h2>
<p>You can filter a result set using the WHERE clause. The following
operators are supported:</p>
<ul class="simple">
<li>Relational: <code class="docutils literal"><span class="pre">-</span></code>, <code class="docutils literal"><span class="pre">=</span></code>, <code class="docutils literal"><span class="pre">&gt;=</span></code>, <code class="docutils literal"><span class="pre">&lt;=</span></code>, <code class="docutils literal"><span class="pre">&lt;&gt;</span></code>, <code class="docutils literal"><span class="pre">BETWEEN</span></code>,
<code class="docutils literal"><span class="pre">IN</span></code>, <code class="docutils literal"><span class="pre">NOT</span> <span class="pre">IN</span></code></li>
<li>Boolean: <code class="docutils literal"><span class="pre">AND</span></code>, <code class="docutils literal"><span class="pre">OR</span></code>, <code class="docutils literal"><span class="pre">NOT</span></code></li>
</ul>
<div class="section" id="filtering-using-a-numeric-value">
<h3>Filtering using a numeric value:<a class="headerlink" href="#filtering-using-a-numeric-value" title="Permalink to this headline">¶</a></h3>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre>SELECT c.name FROM `/users` AS c WHERE c.age &gt; 40
</pre></div>
</div>
</div>
<div class="section" id="filtering-using-a-string-value">
<h3>Filtering using a string value:<a class="headerlink" href="#filtering-using-a-string-value" title="Permalink to this headline">¶</a></h3>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre>SELECT c.name FROM `/users` AS c WHERE c.name = &quot;Sherlock Holmes&quot;
</pre></div>
</div>
</div>
<div class="section" id="filtering-using-multiple-boolean-predicates">
<h3>Filtering using multiple Boolean predicates:<a class="headerlink" href="#filtering-using-multiple-boolean-predicates" title="Permalink to this headline">¶</a></h3>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre>SELECT
  c.name FROM `/users` AS c
WHERE
  c.name = &quot;Sherlock Holmes&quot; AND
  c.street = &quot;Baker Street&quot;
</pre></div>
</div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="numeric-and-string-operations">
<h2>Numeric and String Operations<a class="headerlink" href="#numeric-and-string-operations" title="Permalink to this headline">¶</a></h2>
<p>You can use any of the operators or functions listed in the <a class="reference external" href="#clauses-operators-functions">Clauses,
Operators, and Functions</a> section on
numbers and strings. Some common string operators and functions include:</p>
<table border="1" class="docutils">
<colgroup>
<col width="46%" />
<col width="54%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Operator or Function</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal"><span class="pre">||</span></code></td>
<td>Concatenates</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">LOWER</span></code></td>
<td>Converts to lowercase</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">UPPER</span></code></td>
<td>Converts to uppercase</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">SUBSTRING</span></code></td>
<td>Returns a substring</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">LENGTH</span></code></td>
<td>Returns length of string</td>
</tr>
</tbody>
</table>
<p><strong>Examples:</strong></p>
<p>Using mathematical operations:</p>
<div class="highlight-python"><div class="highlight"><pre>SELECT c.age + 2 * 1 / 4 % 2 FROM `/users` AS c
</pre></div>
</div>
<p>Concatenating strings:</p>
<div class="highlight-python"><div class="highlight"><pre>SELECT c.firstName || &#39; &#39; || c.lastName AS name FROM `/users` AS c
</pre></div>
</div>
<p>Filtering by fuzzy string comparison using the <code class="docutils literal"><span class="pre">LIKE</span></code> operator:</p>
<div class="highlight-python"><div class="highlight"><pre>SELECT * FROM `/users` AS c WHERE c.firstName LIKE &quot;%Joan%&quot;
</pre></div>
</div>
<p>Filtering by regular expression:</p>
<div class="highlight-python"><div class="highlight"><pre>SELECT * FROM `/users` AS c WHERE c.firstName ~ &quot;[sS]h+&quot;&quot;
</pre></div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="dates-and-times">
<h2>Dates and Times<a class="headerlink" href="#dates-and-times" title="Permalink to this headline">¶</a></h2>
<p>Filter by dates and times using the <code class="docutils literal"><span class="pre">TIMESTAMP</span></code>, <code class="docutils literal"><span class="pre">TIME</span></code>, and
<code class="docutils literal"><span class="pre">DATE</span></code> operators. The <code class="docutils literal"><span class="pre">DATEPART</span></code> operator can also be used
to select part of a date, such as the day.</p>
<p><strong>Note:</strong>  Some databases will automatically convert strings into dates
or date/times. SlamData does not perform this conversion, since the
underlying database has no schema and no fixed type for any field. As a
result, an expression like <code class="docutils literal"><span class="pre">WHERE</span> <span class="pre">ts</span> <span class="pre">&gt;</span> <span class="pre">&quot;2015-02-10&quot;</span></code> compares
string-valued <code class="docutils literal"><span class="pre">ts</span></code> fields with the string <code class="docutils literal"><span class="pre">&quot;2015-02-10&quot;</span></code> instead of
a date comparison.</p>
<blockquote>
<div>If you want to embed literal dates, timestamps, etc. into your SQL
queries, you should use the time conversion operators, which accept
a string and return value of the appropriate type. For example, the
above snippet could be converted to
<code class="docutils literal"><span class="pre">WHERE</span> <span class="pre">ts</span> <span class="pre">&gt;</span> <span class="pre">DATE(&quot;2015-02-10&quot;)</span></code>, which looks for date-valued
<code class="docutils literal"><span class="pre">ts</span></code> fields and compares them with the date <code class="docutils literal"><span class="pre">2015-02-10</span></code>.</div></blockquote>
<p><em>NOTE for MongoDB Users</em>:</p>
<blockquote>
<div>If your MongoDB data does not use MongoDB&#8217;s native date/time type,
and instead, you store your timestamps as epoch milliseconds in a
numeric value, then you should either compare numbers or use the
<code class="docutils literal"><span class="pre">TO_TIMESTAMP</span></code> function.</div></blockquote>
<div class="section" id="filter-based-on-a-timestamp-date-and-time">
<h3>Filter based on a timestamp (date and time)<a class="headerlink" href="#filter-based-on-a-timestamp-date-and-time" title="Permalink to this headline">¶</a></h3>
<p>Use the <code class="docutils literal"><span class="pre">TIMESTAMP</span></code> operator to convert a string into a date and time.
The string should have the format <code class="docutils literal"><span class="pre">YYYY-MM-DDTHH:MM:SS</span></code>.</p>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre>SELECT * FROM `/log/events` AS c WHERE c.ts &gt; TIMESTAMP(&quot;2015-04-29T15:16:55&quot;)
</pre></div>
</div>
</div>
<div class="section" id="filter-based-on-a-time">
<h3>Filter based on a time<a class="headerlink" href="#filter-based-on-a-time" title="Permalink to this headline">¶</a></h3>
<p>Use the <code class="docutils literal"><span class="pre">TIME</span></code> operator to convert a string into a time. The string
should have the format <code class="docutils literal"><span class="pre">HH:MM:SS</span></code>.</p>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre>SELECT * FROM `/log/events` AS c WHERE c.ts &gt; TIME(&quot;15:16:55&quot;)
</pre></div>
</div>
</div>
<div class="section" id="filter-based-on-a-date">
<h3>Filter based on a date<a class="headerlink" href="#filter-based-on-a-date" title="Permalink to this headline">¶</a></h3>
<p>Use the <code class="docutils literal"><span class="pre">DATE</span></code> operator to convert a string into a date. The string
should have the format <code class="docutils literal"><span class="pre">YYYY-MM-DD</span></code>.</p>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre>SELECT * FROM `/log/events` AS c WHERE c.ts &gt; DATE(&quot;2015-04-29&quot;)
</pre></div>
</div>
</div>
<div class="section" id="filter-based-on-part-of-a-date">
<h3>Filter based on part of a date<a class="headerlink" href="#filter-based-on-part-of-a-date" title="Permalink to this headline">¶</a></h3>
<p>Use the <code class="docutils literal"><span class="pre">DATE_PART</span></code> function to select part of a date. <code class="docutils literal"><span class="pre">DATE_PART</span></code>
has two arguments: a string that indicates what part of the date or time
that you want and a timestamp field. Valid values for the first argument
are century, day, decade, <code class="docutils literal"><span class="pre">dow</span></code> (day of week), <code class="docutils literal"><span class="pre">doy</span></code> (day of year),
<code class="docutils literal"><span class="pre">hour</span></code>, <code class="docutils literal"><span class="pre">isodoy</span></code>, <code class="docutils literal"><span class="pre">microseconds</span></code>, <code class="docutils literal"><span class="pre">millenium</span></code>, <code class="docutils literal"><span class="pre">milliseconds</span></code>,
<code class="docutils literal"><span class="pre">minute</span></code>, <code class="docutils literal"><span class="pre">month</span></code>, <code class="docutils literal"><span class="pre">quarter</span></code>, <code class="docutils literal"><span class="pre">second</span></code>, and <code class="docutils literal"><span class="pre">year</span></code>.</p>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre>SELECT DATE_PART(&quot;day&quot;, c.ts) FROM `/log/events` AS c
</pre></div>
</div>
</div>
<div class="section" id="filter-based-on-a-unix-epoch">
<h3>Filter based on a Unix epoch<a class="headerlink" href="#filter-based-on-a-unix-epoch" title="Permalink to this headline">¶</a></h3>
<p>Use the <code class="docutils literal"><span class="pre">TO_TIMESTAMP</span></code> function to convert Unix epoch (milliseconds)
to a timestamp.</p>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre>SELECT * FROM `/log/events` AS c WHERE c.ts &gt; TO_TIMESTAMP(1446335999)
</pre></div>
</div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="grouping">
<h2>Grouping<a class="headerlink" href="#grouping" title="Permalink to this headline">¶</a></h2>
<p>SQL2 allows you to group data by fields and by date parts.</p>
<div class="section" id="group-based-on-a-single-field">
<h3>Group based on a single field<a class="headerlink" href="#group-based-on-a-single-field" title="Permalink to this headline">¶</a></h3>
<p>Use <code class="docutils literal"><span class="pre">GROUP</span> <span class="pre">BY</span></code> to group results by a field.</p>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre>SELECT
    c.age,
    COUNT(*) AS cnt
FROM `/users` AS c
GROUP BY c.age
</pre></div>
</div>
</div>
<div class="section" id="group-based-on-multiple-fields">
<h3>Group based on multiple fields<a class="headerlink" href="#group-based-on-multiple-fields" title="Permalink to this headline">¶</a></h3>
<p>You can group by multiple fields with a comma-separated list of fields
after <code class="docutils literal"><span class="pre">GROUP</span> <span class="pre">BY</span></code>.</p>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre>SELECT
    c.age,
    c.gender,
    COUNT(*) AS cnt
FROM `/users` AS c
GROUP BY c.age, c.gender
</pre></div>
</div>
</div>
<div class="section" id="group-based-on-date-part">
<h3>Group based on date part<a class="headerlink" href="#group-based-on-date-part" title="Permalink to this headline">¶</a></h3>
<p>Use the <code class="docutils literal"><span class="pre">DATE_PART</span></code> function to group by a part of a date, such as the
month.</p>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre>SELECT
    DATE_PART(&quot;day&quot;, c.ts) AS day,
    COUNT(*) AS cnt
FROM `/log/events` AS c
GROUP BY DATE_PART(&quot;day&quot;, c.ts)
</pre></div>
</div>
</div>
<div class="section" id="filter-within-a-group">
<h3>Filter within a group<a class="headerlink" href="#filter-within-a-group" title="Permalink to this headline">¶</a></h3>
<p>Filter results within a group by adding a <code class="docutils literal"><span class="pre">HAVING</span></code> clause followed by
a Boolean predicate.</p>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre>SELECT
    DATE_PART(&quot;day&quot;, c.ts) AS day,
    COUNT(*) AS cnt
FROM `/prod/purger/events` AS c
GROUP BY DATE_PART(&quot;day&quot;, c.ts)
HAVING c.gender = &quot;female&quot;
</pre></div>
</div>
</div>
<div class="section" id="double-grouping">
<h3>Double grouping<a class="headerlink" href="#double-grouping" title="Permalink to this headline">¶</a></h3>
<p>Perform double-grouping operations by putting operators inside other
operators. The inside operator will be performed on each group created
by the <code class="docutils literal"><span class="pre">GROUP</span> <span class="pre">BY</span></code> clause, and the outside operator will be performed
on the results of the inside operator.</p>
<p>Example:</p>
<p>This query returns the average population of states. The outer
aggregation function (AVG) operates on the results of the inner
aggregation (<code class="docutils literal"><span class="pre">SUM</span></code>) and <code class="docutils literal"><span class="pre">GROUP</span> <span class="pre">BY</span></code> clause.</p>
<div class="highlight-python"><div class="highlight"><pre>SELECT AVG(SUM(pop)) FROM `/population` GROUP BY state
</pre></div>
</div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="nested-data-and-arrays">
<h2>Nested Data and Arrays<a class="headerlink" href="#nested-data-and-arrays" title="Permalink to this headline">¶</a></h2>
<p>Unlike a relational database many NoSQL databases allow data to be
nested (that is, data can be objects) and to contain arrays.</p>
<div class="section" id="nesting">
<h3>Nesting<a class="headerlink" href="#nesting" title="Permalink to this headline">¶</a></h3>
<p>Nesting is represented by levels separated by a period (<code class="docutils literal"><span class="pre">.</span></code>).</p>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre>SELECT c.profile.address.street.number FROM `/users` AS c
</pre></div>
</div>
</div>
<div class="section" id="arrays">
<h3>Arrays<a class="headerlink" href="#arrays" title="Permalink to this headline">¶</a></h3>
<p>Array elements are represented by the array index in square brackets
(<code class="docutils literal"><span class="pre">[n]</span></code>).</p>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre>SELECT c.profile.allAddress[0].street.number FROM `/users` AS c
</pre></div>
</div>
</div>
<div class="section" id="flattening">
<h3>Flattening<a class="headerlink" href="#flattening" title="Permalink to this headline">¶</a></h3>
<p>You can extract all elements of an array or all field values
simultaneously, essentially removing levels and flattening the data. Use
the asterisk in square brackets (<code class="docutils literal"><span class="pre">[*]</span></code>) to extract all array elements.</p>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre>SELECT c.profile.allAddresses[*] FROM `/users` AS c
</pre></div>
</div>
<p>Use the asterisk in curly brackets (<code class="docutils literal"><span class="pre">{*}</span></code>) to extract all field
values.</p>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre>SELECT c.profile.{*} FROM `/users` AS c
</pre></div>
</div>
</div>
<div class="section" id="filtering-using-arrays">
<h3>Filtering using arrays<a class="headerlink" href="#filtering-using-arrays" title="Permalink to this headline">¶</a></h3>
<p>You can filter using data in all array elements by using the asterisk in
square brackets (<code class="docutils literal"><span class="pre">[*]</span></code>) in a <code class="docutils literal"><span class="pre">WHERE</span></code> clause.</p>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre>SELECT DISTINCT * FROM `/users` AS c WHERE c.profile.allAddresses[*].street.number = &quot;221B&quot;
</pre></div>
</div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="pagination-and-sorting">
<h2>Pagination and Sorting<a class="headerlink" href="#pagination-and-sorting" title="Permalink to this headline">¶</a></h2>
<div class="section" id="pagination">
<h3>Pagination<a class="headerlink" href="#pagination" title="Permalink to this headline">¶</a></h3>
<p>Pagination is used to break large return results into smaller chunks.
Use the <code class="docutils literal"><span class="pre">LIMIT</span></code> operator to set the number of results to be returned
and the <code class="docutils literal"><span class="pre">OFFSET</span></code> operator to set the index at which the results should
start.</p>
<p>Example (Limit results to 20 entries):</p>
<div class="highlight-python"><div class="highlight"><pre>SELECT * FROM `/users` LIMIT 20
</pre></div>
</div>
<p>Example (Return the 100th to 119th entry):</p>
<div class="highlight-python"><div class="highlight"><pre>SELECT * FROM `/users` OFFSET 100 LIMIT 20
</pre></div>
</div>
</div>
<div class="section" id="sorting">
<h3>Sorting<a class="headerlink" href="#sorting" title="Permalink to this headline">¶</a></h3>
<p>Use the <code class="docutils literal"><span class="pre">ORDER</span> <span class="pre">BY</span></code> clause to sort the results. You can specify one or
more fields for sorting, and you can use operators in the <code class="docutils literal"><span class="pre">ORDER</span> <span class="pre">BY</span></code>
arguments. Use <code class="docutils literal"><span class="pre">ASC</span></code> for ascending sorting and <code class="docutils literal"><span class="pre">DESC</span></code> for decending
sorting.</p>
<p>Example (Sort users by ascending age):</p>
<div class="highlight-python"><div class="highlight"><pre>SELECT * FROM `/users` ORDER BY age ASC
</pre></div>
</div>
<p>Example (Sort users by last digit in age, descending, and full name,
ascending):</p>
<div class="highlight-python"><div class="highlight"><pre>SELECT * FROM `/users`
ORDER BY age % 10 DESC, firstName + lastName ASC
</pre></div>
</div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="joining-collections">
<h2>Joining Collections<a class="headerlink" href="#joining-collections" title="Permalink to this headline">¶</a></h2>
<p>Use the <code class="docutils literal"><span class="pre">JOIN</span></code> operator to join two or more different collections.</p>
<p>The <code class="docutils literal"><span class="pre">JOIN</span></code> operator is a powerful way to implement joins in
non-relational databases such as MongoDB. There is no enforced limit to
how many collections or tables can be joined in a query but common sense
should prevail based on the size of collections.</p>
<p>Examples:</p>
<p>This example returns the names of employees and the names of the
departments they belong to by matching up the employee deparment ID with
the department&#8217;s ID, where both IDs are ObjectID types.</p>
<div class="highlight-python"><div class="highlight"><pre>SELECT
    emp.name,
    dept.name
FROM `/employees` AS emp
JOIN `/departments` AS dept ON dept._id = emp.departmentId
</pre></div>
</div>
<p>If one of the IDs is a string, then use the <code class="docutils literal"><span class="pre">OID</span></code> operator to convert
it to an ID.</p>
<div class="highlight-python"><div class="highlight"><pre>SELECT
    emp.name,
    dept.name
FROM `/employees` AS emp
JOIN `/departments` AS dept ON dept._id = OID(emp.departmentId)
</pre></div>
</div>
<div class="section" id="join-considerations">
<h3>Join Considerations<a class="headerlink" href="#join-considerations" title="Permalink to this headline">¶</a></h3>
<p>On <code class="docutils literal"><span class="pre">JOIN</span></code>s with more than two collections or tables, the standard
rule of thumb is to place the tables in order from smallest to largest.
If the collections <code class="docutils literal"><span class="pre">a</span></code>, <code class="docutils literal"><span class="pre">b</span></code>, and <code class="docutils literal"><span class="pre">c</span></code> have <code class="docutils literal"><span class="pre">4</span></code>, <code class="docutils literal"><span class="pre">8</span></code>, and <code class="docutils literal"><span class="pre">16</span></code>
documents respectively, then ordering <code class="docutils literal"><span class="pre">FROM</span> <span class="pre">`/a`,</span> <span class="pre">`/b`,</span> <span class="pre">`/c`</span></code> is most
efficient with <code class="docutils literal"><span class="pre">WHERE</span> <span class="pre">a._id</span> <span class="pre">=</span> <span class="pre">b._id</span></code>.</p>
<p>If, however, the filter condition is <code class="docutils literal"><span class="pre">WHERE</span> <span class="pre">b._id</span> <span class="pre">=</span> <span class="pre">c._id</span></code> then the
appropriate ordering would be
<code class="docutils literal"><span class="pre">FROM</span> <span class="pre">`/b`,</span> <span class="pre">`/c`,</span> <span class="pre">`/a`</span> <span class="pre">WHERE</span> <span class="pre">b._id</span> <span class="pre">=</span> <span class="pre">c._id</span></code>. This is because without
the filter |a ⨯ b| = 32 which is less than |b ⨯ c| = 128, but with
the filter, |b ⨯ c| is limited to the number of documents in b, which
is 8 (and which is lower than the unconstrained |a ⨯ b|).</p>
</div>
</div>
<hr class="docutils" />
<div class="section" id="conditionals-and-nulls">
<h2>Conditionals and Nulls<a class="headerlink" href="#conditionals-and-nulls" title="Permalink to this headline">¶</a></h2>
<div class="section" id="conditionals">
<h3>Conditionals<a class="headerlink" href="#conditionals" title="Permalink to this headline">¶</a></h3>
<p>Use the <code class="docutils literal"><span class="pre">CASE</span></code> expression to provide if-then-else logic to SQL2. The
<code class="docutils literal"><span class="pre">CASE</span></code> sytax is:</p>
<div class="highlight-python"><div class="highlight"><pre>SELECT (CASE &lt;field&gt;
    WHEN &lt;value1&gt; THEN &lt;result1&gt;
    WHEN &lt;value2&gt; THEN &lt;result2&gt;
    ...
    ELSE &lt;elseResult&gt;
    END)
FROM `&lt;path&gt;`
</pre></div>
</div>
<p>Example:</p>
<p>The following example generates a code based on gender string values.</p>
<div class="highlight-python"><div class="highlight"><pre>SELECT (CASE c.gender
    WHEN &quot;male&quot; THEN 1
    WHEN &quot;female&quot; THEN 2
    ELSE 3
    END) AS genderCode
FROM `/users` AS c
</pre></div>
</div>
</div>
<div class="section" id="nulls">
<h3>Nulls<a class="headerlink" href="#nulls" title="Permalink to this headline">¶</a></h3>
<p>Use the <code class="docutils literal"><span class="pre">COALESCE</span></code> function to evaluate the arguments in order and
return the current value of the first expression that initially does not
evaluate to <code class="docutils literal"><span class="pre">NULL</span></code>.</p>
<p>Example:</p>
<p>This example returns a full name, if not null, but returns the first
name if the full name is null.</p>
<div class="highlight-python"><div class="highlight"><pre>SELECT COALESCE(c.fullName, c.firstName) AS name FROM `/users` AS c
</pre></div>
</div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="database-specific-notes">
<h2>Database Specific Notes<a class="headerlink" href="#database-specific-notes" title="Permalink to this headline">¶</a></h2>
<div class="section" id="mongodb">
<h3>MongoDB<a class="headerlink" href="#mongodb" title="Permalink to this headline">¶</a></h3>
<div class="section" id="the-id-field">
<h4>The _id Field<a class="headerlink" href="#the-id-field" title="Permalink to this headline">¶</a></h4>
<p>By default, the <code class="docutils literal"><span class="pre">_id</span></code> field will not appear in a result set. However,
you can specify it by selecting the <code class="docutils literal"><span class="pre">_id</span></code> field. For example:</p>
<div class="highlight-python"><div class="highlight"><pre>SELECT _id AS cust_id FROM `/users`
</pre></div>
</div>
<p>MongoDB has special rules about fields called <code class="docutils literal"><span class="pre">_id</span></code>. For example, they
must remain unique, which means that some queries (such as
<code class="docutils literal"><span class="pre">SELECT</span> <span class="pre">myarray[*]</span> <span class="pre">FROM</span> <span class="pre">foo</span></code>) will introduce duplicates that MongoDB
won&#8217;t allow. In addition, other queries change the value of <code class="docutils literal"><span class="pre">_id</span></code>
(such as grouping). So SlamData manages <code class="docutils literal"><span class="pre">_id</span></code> and treats it as a
special field.</p>
<p><strong>Note:</strong> To filter on <code class="docutils literal"><span class="pre">_id</span></code>, you must first convert a string to an
object ID, by using the <code class="docutils literal"><span class="pre">OID</span></code> function. For example:</p>
<div class="highlight-python"><div class="highlight"><pre>SELECT * FROM `/foo` WHERE _id = OID(&quot;abc123&quot;)
</pre></div>
</div>
</div>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="slamdown-reference.html" class="btn btn-neutral float-right" title="Reference - SlamDown" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="troubleshooting-faq.html" class="btn btn-neutral" title="Troubleshooting FAQ" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, SlamData.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'2.5',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>